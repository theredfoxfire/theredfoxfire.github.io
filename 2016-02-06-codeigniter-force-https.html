<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
  <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
  <script src="javascripts/main.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

  <title>Codeigniter force https://</title>
</head>

<body>
  <header>
    <div class="inner">
      <h1><a href="http://theredfoxfire.github.io/">Hasan Setiawan</a></h1>
      <h2>Write, write, write give your wings on code!</h2>
      <a href="https://github.com/theredfoxfire" class="button"><small>Follow me on</small> GitHub</a>
    </div>
  </header>

  <div id="content-wrapper">
    <div class="inner clearfix">
      <section id="main-content">
        <h2>Codeigniter force https://</h2>
        <p>
            Open config file from location <code>application/config/config.php</code> and enable or set hooks to true like this:
            <br><br>
            <code>$config['enable_hooks'] = TRUE;</code>
            <br><br>
            Then create a new file named hooks.php inside the config folder (i.e. application/config/hooks.php) and add the following code in it:
            <br><br>
<pre>
  <code>
      //application/config/hooks.php
      $hook['post_controller_constructor'][] = array(
          'function' => 'redirect_ssl',
          'filename' => 'ssl.php',
          'filepath' => 'hooks'
       );
  </code>
</pre>
        </p>
<p>
  Now create a new directory named hooks inside the application folder (i.e. application/hooks) and then create a new file named ssl.php inside the hooks folder (i.e. application/hooks/ssl.php).
  <br>
  Add the following code in the ssl.php file: <br><br>
  <pre>
    <code>
      // application/hooks/ssl.php
      function redirect_ssl() {
          $CI =& get_instance();
          $class = $CI->router->fetch_class();
          $exclude =  array('client');  // add more controller name to exclude ssl.
          if(!in_array($class,$exclude)) {
              // redirecting to ssl.
              $CI->config->config['base_url'] = str_replace('http://', 'https://', $CI->config->config['base_url']);
              if ($_SERVER['SERVER_PORT'] != 443) redirect($CI->uri->uri_string());
          } else {
              // redirecting with no ssl.
              $CI->config->config['base_url'] = str_replace('https://', 'http://', $CI->config->config['base_url']);
              if ($_SERVER['SERVER_PORT'] == 443) redirect($CI->uri->uri_string());
          }
      }
    </code>
  </pre>
</p>
      </section>

      <aside id="sidebar">


        <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.<br><br><hr/><a action="action" onclick="window.history.go(-1); return false;" href="#">Back</a></p>
        <h3>

        </h3>
      </aside>
    </div>
  </div>


</body>
</html>
