<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
  <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

  <title>Write, write, write give your wings on code!</title>
</head>

<body>
  <header>
    <div class="inner">
      <h1><a href="http://theredfoxfire.github.io/">Hasan Setiawan</a></h1>
      <h2>Write, write, write give your wings on code!</h2>
      <a href="https://github.com/theredfoxfire" class="button"><small>Follow me on</small> GitHub</a></>
    </div>
  </header>

  <div id="content-wrapper">
    <div class="inner clearfix">
      <section id="main-content">
        <h2>Whether you need to use Laravel Eloquent or Query builder</h2>
        <p>
          Just to be clear, I am not going to compare between Laravel eloquent and Query Builder. For me both of them
          are good option and you can doing work with them. Laravel eloquent give you benefit on getting data without writing complex query.
        </p>
        <p>
          Also Eloquent has ton of extra features the query builder lacks, such readability, accessors, mutators,
          JSON/Array conversion, hiding sensitive attributes, automatic timestams, automatic attribute casting, sofdeletes.
          And one thing, by using eloquent you will feel more comfortable on switching your DB engine.
          Because you don't need to rewrite your code.
          But ya with notice since your DB engine are supported by eloquent you are save.
        </p>
        <p>
          <blockquote>
            <pre>
              <code>
// Snippet code of Query Builder
public static function getBreakdown($date)
{
    $previousSix = previousSixHelper($date);

    $dinein = DB::select("
      select DISTINCT patron_type, count(total_amount) as total_patron from la_order_summary
      where order_type = '4' and left(order_datetime, 10) BETWEEN :previousSix and :dateParam
      ", ['previousSix' => $previousSix,
      'dateParam' => $date,
    ]);

    $takeAway = DB::select("
      select DISTINCT patron_type, count(total_amount) as total_patron from la_order_summary
      where order_type = '5' and left(order_datetime, 10) BETWEEN :previousSix and :dateParam
      ", [
      'previousSix' => $previousSix,
      'dateParam' => $date,
    ]);

    return [
      'dinein' => $dinein->total_patron,
      'takeAway' => $takeAway->total_patron,
    ];
}



// Snippet code of Laravel Eloquent
/**
 * @return \Illuminate\Database\Eloquent\Relations\HasMany
 */
public function descriptions()
{
  return $this->hasMany('App\Addon_Description', 'addon_id', 'id');
}

/**
 * @return \Illuminate\Database\Eloquent\Relations\BelongsToMany
 */
public function products()
{
  return $this->belongsToMany('App\Product', 'product_addon')
    ->withTimestamps();
}
              </code>
            </pre>
          </blockquote>
        </p>
        <p>
          Eloquent is Laravel's implementation of Active Record pattern and it comes with all its strengths and weaknesses.
          It is a good solution to use when you process a single entity in a CRUD manner - that is, read from database or
          create a new entity and then save it or delete. You will benefit a lot from Eloquent's features such as dirty
          checking (to send SQL UPDATE only for the fields which have been changed),
          model events (e.g. to send administrative alert or update statistics counter when someone has created a new account),
          traits (timestamps, soft deletes, custom traits) eager/lazy loading etc.
        </p>
        <p>
          But, as you already know, it comes with some performance price. When you process a single or just a few records,
          there is nothing to worry about. But for cases when you read lots of records (e.g. for datagrids, for reports,
          for batch processing etc.) the plain DB is better approach. Yes you may said Laravel Query Builder is the best choice in this case.
        </p>

        <p>
          For our application we are doing exactly that - using Laravel's Eloquent in web forms to process a single record
          and using DB (with SQL views) to retrieve data for grids, export etc.
        </p>
      </section>

      <aside id="sidebar">


        <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.<br><br><hr/><a action="action" onclick="window.history.go(-1); return false;" href="#">Back</a></p>
        <h3>

        </h3>
      </aside>
    </div>
  </div>


</body>

</html>
